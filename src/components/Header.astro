---
import HeaderLink from './HeaderLink.astro';
---

<header class="site-header" id="site-header">
	<nav>
		<a href="/" class="logo-link" aria-label="Ranknitro Startseite">
			<img src="/logo.avif" alt="Ranknitro" class="logo logo-light" width="160" height="40" />
			<img src="/logo-dark.avif" alt="Ranknitro" class="logo logo-dark" width="160" height="40" />
		</a>
		<div class="nav-links">
			<HeaderLink href="/">Start</HeaderLink>
			<HeaderLink href="/blog">Blog</HeaderLink>
			<HeaderLink href="/geo-checkliste">GEO-Checkliste</HeaderLink>
			<HeaderLink href="/about">Ãœber uns</HeaderLink>
		</div>
		<a href="#geo-audit" class="cta-btn">Free GEO Audit</a>
	</nav>
</header>

<script>
	(function () {
		const header = document.getElementById('site-header');
		if (!header) return;
		const invertSections = document.querySelectorAll('[data-nav-invert]');
		if (!invertSections.length) return;
		const navHeight = 80;

		function checkInvert() {
			let overBlack = false;
			invertSections.forEach((el) => {
				const rect = el.getBoundingClientRect();
				if (rect.top < navHeight && rect.bottom > 0) overBlack = true;
			});
			header.classList.toggle('nav-inverted', overBlack);
		}
		window.addEventListener('scroll', checkInvert, { passive: true });
		window.addEventListener('resize', checkInvert);
		checkInvert();
	})();
</script>

<style>
	.site-header {
		position: sticky;
		top: 0;
		z-index: 100;
		background: #FFFFFF;
		border-bottom: 1px solid #000000;
		transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
	}
	.site-header.nav-inverted {
		background: #010208;
		border-bottom-color: #FFFFFF;
	}
	.site-header nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: 1200px;
		margin: 0 auto;
		padding: 0.75rem 1.5rem;
		gap: 1rem;
	}
	.logo-link {
		display: flex;
		align-items: center;
		text-decoration: none;
		border: none;
	}
	.logo {
		height: 36px;
		width: auto;
		object-fit: contain;
		display: block;
	}
	.logo-dark {
		display: none;
	}
	.nav-inverted .logo-light {
		display: none;
	}
	.nav-inverted .logo-dark {
		display: block;
	}
	.nav-links {
		display: flex;
		align-items: center;
		gap: 0.25rem;
	}
	.nav-links a {
		padding: 0.5rem 0.75rem;
		font-family: "Montserrat", sans-serif;
		font-weight: 700;
		font-size: 0.9rem;
		color: #010208;
		text-decoration: none;
		border: 2px solid transparent;
	}
	.nav-links a:hover,
	.nav-links a.active {
		text-decoration: underline;
	}
	.site-header.nav-inverted .nav-links a {
		color: #FFFFFF;
	}
	.cta-btn {
		display: inline-block;
		padding: 0.6rem 1.25rem;
		background: #FFFFFF;
		color: #010208;
		font-family: "Montserrat", sans-serif;
		font-weight: 700;
		font-size: 0.9rem;
		text-decoration: none;
		border: 2px solid #010208;
		border-radius: 0;
		transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
	}
	.cta-btn:hover {
		background: #010208;
		color: #FFFFFF;
		border-color: #FFFFFF;
	}
	.site-header.nav-inverted .cta-btn {
		background: #FFFFFF;
		color: #010208;
		border-color: #FFFFFF;
	}
	.site-header.nav-inverted .cta-btn:hover {
		background: #010208;
		color: #FFFFFF;
		border-color: #FFFFFF;
	}
	@media (max-width: 720px) {
		.site-header nav {
			flex-wrap: wrap;
			padding: 0.5rem 1rem;
		}
		.nav-links {
			order: 3;
			width: 100%;
			justify-content: flex-start;
		}
		.cta-btn {
			margin-left: auto;
		}
	}
</style>
